<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desaf√≠o de Seguridad: Identificaci√≥n de Riesgos</title>
    <style>
        /* ESTILOS GENERALES */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #2c3e50;
            color: white;
            text-align: center;
            margin: 0;
            padding: 0;
            /* Permitimos scroll si la pantalla es muy peque√±a */
            overflow-x: hidden; 
        }

        /* --- NUEVO: ENCABEZADO (LOGO Y T√çTULO) --- */
        header {
            background-color: #34495e;
            padding: 15px 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-bottom: 3px solid #f39c12;
            margin-bottom: 20px;
        }

        .logo-container img {
            max-height: 200px; /* Tama√±o m√°ximo del logo */
            margin-bottom: 10px;
        }

        header h1 {
            margin: 5px 0;
            color: #f39c12; /* Color naranja de seguridad */
            font-size: 1.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        header p {
            margin: 5px 0;
            font-size: 1.1rem;
            color: #bdc3c7;
            max-width: 800px;
        }

        /* √ÅREA DE JUEGO */
        #game-wrapper {
            position: relative;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding-bottom: 100px; /* Espacio para el tablero inferior */
        }

        #game-container {
            position: relative;
            width: 1100px;  /* Ancho de tu imagen */
            height: 600px;  /* Alto de tu imagen */
            border: 5px solid #ecf0f1;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            /* AQU√ç VA TU IMAGEN DE FONDO */
            background-image: url('gemini32.png'); 
            background-size: cover;
            background-position: center;
        }

        /* ZONAS DE CLIC (Peligros) */
        .peligro {
            position: absolute;
            cursor: pointer;
            /* Borde transparente por defecto, c√°mbialo a 'red' si necesitas depurar */
            border: 2px dashed rgba(255, 0, 0, 0); 
            background-color: rgba(255, 0, 0, 0);
            transition: background 0.3s;
        }

        .peligro:hover {
            background-color: rgba(255, 255, 0, 0.2); /* Brillo al pasar el mouse */
        }

        .peligro.resuelto {
            border: 3px solid #2ecc71;
            background-color: rgba(46, 204, 113, 0.3);
            pointer-events: none; /* Desactiva el clic */
        }

        /* POSICIONES (Tus coordenadas exactas) */
        #p1 { top: 470px; left: 235px; width: 80px; height: 60px; }   /* Aceite */
        #p2 { top: 50px; left: 940px; width: 60px; height: 300px; }   /* Escalera Vert */
        #p3 { top: 270px; left: 280px; width: 150px; height: 30px; }  /* Cables */
        #p4 { top: 520px; left: 330px; width: 200px; height: 80px; }  /* Mangueras */
        #p5 { top: 300px; left: 300px; width: 150px; height: 100px; } /* Obstrucci√≥n */
        #p6 { top: 330px; left: 550px; width: 150px; height: 100px; } /* Escaleras Concreto */
        #p7 { top: 10px; left: 450px; width: 100px; height: 120px; }  /* Cajas mal apiladas */
        #p8 { top: 450px; left: 700px; width: 130px; height: 90px; }  /* Carro carga */

        /* TABLERO INFERIOR (MARCADOR) */
        #tablero-inferior {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 70px;
            background-color: #2c3e50; /* Mismo color fondo */
            display: flex;
            justify-content: center;
            gap: 50px; /* Separaci√≥n entre elementos */
            align-items: center;
            font-size: 1.4rem;
            border-top: 4px solid #f39c12;
            z-index: 999;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
        }

        .dato { font-weight: bold; display: flex; align-items: center; gap: 10px; }
        #timer-box { color: #e74c3c; } /* Rojo para el tiempo */
        #score-box { color: #f1c40f; } /* Amarillo para puntos */

        /* MODAL (Preguntas y Mensajes) */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            color: #333;
            padding: 30px;
            border-radius: 12px;
            width: 500px;
            text-align: center;
            box-shadow: 0 0 25px rgba(255,255,255,0.2);
            border-top: 10px solid #d35400;
        }

        .modal-content h2 { margin-top: 0; color: #d35400; }
        .modal-content p { font-size: 1.1em; line-height: 1.5; }

        /* Botones de opciones */
        .opcion-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background-color: #f8f9fa;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.2s;
            font-weight: 500;
        }

        .opcion-btn:hover {
            background-color: #3498db;
            color: white;
            border-color: #2980b9;
        }

        /* Bot√≥n reiniciar */
        .btn-restart {
            background-color: #e74c3c;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
        }
        .btn-restart:hover { background-color: #c0392b; }
    </style>
</head>
<body>

    <header>
        <div class="logo-container">
            <img src="logo.png" alt="[LOGO EMPRESA]" onerror="this.style.display='none'">
        </div>
        <h1>Campa√±a de Seguridad: Resbalones, Tropezones y Caidas</h1>
        <p>
            Bienvenido al simulador de prevenci√≥n. Tu misi√≥n: Identificar y corregir los 
            <strong>8 peligros de Resbalones, Tropezones y Ca√≠das</strong> antes de que se agote el tiempo.
        </p>
    </header>

    <div id="game-wrapper">
        <div id="game-container">
            <div id="p1" class="peligro" onclick="abrirPregunta(1)"></div> 
            <div id="p2" class="peligro" onclick="abrirPregunta(2)"></div> 
            <div id="p3" class="peligro" onclick="abrirPregunta(3)"></div> 
            <div id="p4" class="peligro" onclick="abrirPregunta(4)"></div> 
            <div id="p5" class="peligro" onclick="abrirPregunta(5)"></div> 
            <div id="p6" class="peligro" onclick="abrirPregunta(6)"></div> 
            <div id="p7" class="peligro" onclick="abrirPregunta(7)"></div> 
            <div id="p8" class="peligro" onclick="abrirPregunta(8)"></div> 
        </div>
    </div>

    <div id="tablero-inferior">
        <div class="dato">üîç Riesgos: <span id="contador">0</span>/8</div>
        <div class="dato" id="timer-box">‚è≥ Tiempo: <span id="tiempo">47</span>s</div>
        <div class="dato" id="score-box">‚≠ê Puntos: <span id="puntos">0</span></div>
    </div>

    <div id="modal-pregunta" class="modal-overlay">
        <div class="modal-content">
            <h2 id="preg-titulo">Identificaci√≥n de Riesgo</h2>
            <p id="preg-texto">¬øCu√°l es la acci√≥n correcta?</p>
            <div id="opciones-container">
                </div>
        </div>
    </div>

    <div id="modal-final" class="modal-overlay">
        <div class="modal-content">
            <h1 id="final-titulo"></h1>
            <p id="final-mensaje"></p>
            <p>Puntaje Final: <strong id="final-puntos" style="font-size: 1.5em;"></strong></p>
            <button class="btn-restart" onclick="location.reload()">Jugar de Nuevo</button>
        </div>
    </div>

    <script>
        // CONFIGURACI√ìN DE LOS RIESGOS (PREGUNTAS Y RESPUESTAS)
        const baseDatosRiesgos = {
            1: {
                titulo: "Mancha de Aceite",
                pregunta: "¬øQu√© acci√≥n inmediata debes tomar?",
                opciones: [
                    { txt: "Limpiar inmediatamente y poner se√±alizaci√≥n.", correcta: true },
                    { txt: "Poner cartones encima para que absorba.", correcta: false },
                    { txt: "Pasar con cuidado para no resbalar.", correcta: false }
                ]
            },
            2: {
                titulo: "Trabajo en Altura (Escalera)",
                pregunta: "El trabajador est√° solo en la escalera. ¬øQu√© falta?",
                opciones: [
                    { txt: "Que suba m√°s r√°pido para terminar pronto.", correcta: false },
                    { txt: "Otra persona apoyando la base de la escalera.", correcta: true },
                    { txt: "Que sostenga las herramientas con la mano.", correcta: false }
                ]
            },
            3: {
                titulo: "Cables en el Suelo",
                pregunta: "Hay cableado cruzando el paso peatonal.",
                opciones: [
                    { txt: "Pegarlos con cinta transparente.", correcta: false },
                    { txt: "Saltar los cables.", correcta: false },
                    { txt: "Organizar, canalizar o usar pasa-cables.", correcta: true }
                ]
            },
            4: {
                titulo: "Desorden (Housekeeping)",
                pregunta: "Mangueras y objetos tirados en el suelo.",
                opciones: [
                    { txt: "Recoger y almacenar en su lugar asignado.", correcta: true },
                    { txt: "Patearlos hacia una esquina.", correcta: false },
                    { txt: "Dejarlos ah√≠ si se van a usar ma√±ana.", correcta: false }
                ]
            },
            5: {
                titulo: "Obstrucci√≥n de Camino",
                pregunta: "Un objeto bloquea la ruta de evacuaci√≥n.",
                opciones: [
                    { txt: "Rodear el objeto.", correcta: false },
                    { txt: "Retirar el objeto inmediatamente.", correcta: true },
                    { txt: "Saltar por encima.", correcta: false }
                ]
            },
            6: {
                titulo: "Infraestructura Da√±ada",
                pregunta: "Escaleras de concreto rotas o en mal estado.",
                opciones: [
                    { txt: "Bajar corriendo para pisar menos.", correcta: false },
                    { txt: "Reportar a mantenimiento y se√±alizar la zona.", correcta: true },
                    { txt: "Poner una tabla de madera encima.", correcta: false }
                ]
            },
            7: {
                titulo: "Apilamiento Incorrecto",
                pregunta: "Cajas mal niveladas en altura.",
                opciones: [
                    { txt: "Empujar las cajas para alinearlas.", correcta: false },
                    { txt: "Desmontar la pila y apilar correctamente (base ancha).", correcta: true },
                    { txt: "Poner m√°s peso arriba para que se asiente.", correcta: false }
                ]
            },
            8: {
                titulo: "Manejo Manual de Cargas",
                pregunta: "Maniobra incorrecta (tirando hacia atr√°s sin ver).",
                opciones: [
                    { txt: "Empujar hacia adelante con visi√≥n clara.", correcta: true },
                    { txt: "Tirar m√°s fuerte para ir r√°pido.", correcta: false },
                    { txt: "Pedir que le griten si hay obst√°culos.", correcta: false }
                ]
            }
        };

        // VARIABLES DEL JUEGO (Con 47 Segundos)
        let puntaje = 0;
        let riesgosEncontrados = 0;
        let tiempoRestante = 110; 
        let juegoActivo = true;
        let timerInterval;
        const totalRiesgos = 8;

        // INICIAR RELOJ
        function iniciarReloj() {
            timerInterval = setInterval(() => {
                if (!juegoActivo) return;

                tiempoRestante--;
                document.getElementById('tiempo').innerText = tiempoRestante;

                if (tiempoRestante <= 0) {
                    gameOver(false); // Se acab√≥ el tiempo
                }
            }, 1000);
        }

        // ABRIR PREGUNTA
        function abrirPregunta(id) {
            if (!juegoActivo) return;
            
            const elemento = document.getElementById('p' + id);
            if (elemento.classList.contains('resuelto')) return; 

            const data = baseDatosRiesgos[id];
            document.getElementById('preg-titulo').innerText = data.titulo;
            document.getElementById('preg-texto').innerText = data.pregunta;

            const container = document.getElementById('opciones-container');
            container.innerHTML = ''; 

            data.opciones.forEach(opcion => {
                const btn = document.createElement('button');
                btn.className = 'opcion-btn';
                btn.innerText = opcion.txt;
                btn.onclick = () => verificarRespuesta(id, opcion.correcta);
                container.appendChild(btn);
            });

            document.getElementById('modal-pregunta').style.display = 'flex';
        }

        // VERIFICAR RESPUESTA
        function verificarRespuesta(id, esCorrecta) {
            document.getElementById('modal-pregunta').style.display = 'none';
            const elemento = document.getElementById('p' + id);

            if (esCorrecta) {
                puntaje += 5;
                elemento.classList.add('resuelto');
                elemento.style.borderColor = "#2ecc71"; 
                riesgosEncontrados++;
                document.getElementById('contador').innerText = riesgosEncontrados;
                alert("‚úÖ ¬°Correcto! (+5 Puntos)");
            } else {
                puntaje -= 5;
                alert("‚ùå Incorrecto. La acci√≥n elegida no es segura. (-5 Puntos)");
            }

            document.getElementById('puntos').innerText = puntaje;

            if (riesgosEncontrados === totalRiesgos) {
                gameOver(true);
            }
        }

        // FIN DEL JUEGO
        function gameOver(victoria) {
            juegoActivo = false;
            clearInterval(timerInterval);
            document.getElementById('modal-final').style.display = 'flex';
            document.getElementById('final-puntos').innerText = puntaje;

            const titulo = document.getElementById('final-titulo');
            const mensaje = document.getElementById('final-mensaje');

            if (victoria) {
                titulo.innerText = "¬°EXCELENTE TRABAJO!";
                titulo.style.color = "#2ecc71";
                mensaje.innerText = "Has identificado y corregido todos los riesgos a tiempo. El √°rea ahora es segura.";
            } else {
                titulo.innerText = "‚ö†Ô∏è ¬°ACCIDENTE OCURRIDO!";
                titulo.style.color = "#e74c3c";
                mensaje.innerText = "El tiempo se agot√≥ antes de asegurar la zona. Debido a los riesgos no corregidos (aceite, cables, desorden...), el riesgo de accidente se ha materializado.";
            }
        }

        window.onload = iniciarReloj;

    </script>
</body>

</html>

